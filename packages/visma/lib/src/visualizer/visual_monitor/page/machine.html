<html>

<head>
  <link rel="stylesheet" href="/css/vis_server.css" />
  <script type="text/javascript" src="/js/vis_server.js"></script>
</head>

<body>
  <div class="container" , id="mainContainer">
    <!-- iframe bellow does not include 'src=/overview/rendered'
           in order to avoid double load/cancellation as load shall
           only happen when the websocket is opened to the server. -->
    <!-- <iframe id="rendered" class="image" frameborder="0" width="100%" scrolling="no" onload="resizeIframe(this)">SM</iframe> -->
    <!-- <object id="rendered" type="image/svg+xml"></object> -->
    <div id="rendered">RENDERED</div>
  </div>


  <script type="text/javascript">

    // function resizeIframe(obj) {
    //   obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    // }

    console.log(window.location.pathname);
    var segments = window.location.pathname.split("/");
    console.log("segments=" + segments);
    var hostname = segments[3];
    var domain = segments[4];
    var smId = segments[5];
    console.log("hostname=" + hostname);
    console.log("domain=" + domain);
    console.log("smId=" + smId);

    uniqueSmId = hostname + "/" + domain + "/" + smId;

    window.onload = register(
      "/machine/rendered/" + uniqueSmId,
      "/machine/subscribe/" + uniqueSmId
    );
  </script>
</body>

</html>